## 第一章

1. Anaconda Prompt
```shell
    pip install Django
```

2. 编写functional_tests.py
```python
from selenium import webdriver
browser = webdriver.Chrome()
browser.get('http://localhost:8000')
assert 'Django' in browser.title
```

3. 跳转到该目录下或powershell 输入
 ```shell
 django-damin.py startproject suplerlists
 ```

4. Anaconda Prompt
 ```shell
 python manage.py runserver
 ```

5. Spyder中运行functional_tests.py

6. 成功

7. 目录下打开Linux Shell
 ```shell
ls
mv functional_tests.py superlists/
cd superlists
 ```

8. 同步到github

## 第二章

1. 关掉所有的，更新functional_tests.py代码（第23张ppt）

2. 到目录\21 _Software Testing Technology\suplerlists处Anaconda Prompt
 ```shell
python manage.py runserver
 ```

3. Anaconda Prompt到目录处运行测试
 ```shell
python functional_tests.py
 ```
4. 新建functional_tests2.py并添加代码 (第30张ppt)

5. Anaconda Prompt运行
 ```shell
python functional_tests2.py
 ```

## 第三章

1. Anaconda Prompt到目录处
 ```shell
python manage.py startapp lists
 ```

2. 编辑list下的test.py    
 ```python
from django.test import TestCase
class SmokeTest(TestCase):
    def test_bad_maths(self):
   	 self.assertEqual(1 + 1, 3)
 ```

3. Anaconda Prompt到目录处
 ```shell
python manage.py test
 ```

4. 编辑list下的test.py    
 ```python
from django.urls import resolve
from django.test import TestCase
from lists.views import home_page
class HomePageTest(TestCase):
    def test_root_url_resolves_to_home_page_view(self):
        found = resolve('/')
        self.assertEqual(found.func, home_page)
 ```

5. Anaconda Prompt到目录处
 ```shell
python manage.py test
 ```

### 第三章小结 
- Running the Django dev server
 `python manage.py runserver`
- Running the functional tests
 `python functional_tests.py`
- Running the unit tests
 `python manage.py test`
- The unit-test/code cycle
> 1. Run the unit tests in the terminal.
> 2. Make a minimal code change in the editor.
> 3. Repeat!

## 第三章续

1. 上接15步，编辑好test.py。到目录处Anaconda Prompt

 ```python
python manage.py runserver
 ```

2. 到目录处新开Anaconda Prompt

 ```python
python manage.py test
 ```

3. 编辑views.py，添加

 ```python
from django.shortcuts import render
home_page = None
 ```
4. Anaconda Prompt重新运行（在目录处，以后略）

 ```python
python manage.py test
 ```

5. suplerlists\suplerlists中打开urls.py并改成

 ```python
from django.contrib import admin
from django.urls import path
from django.conf.urls import url
from lists import views
urlpatterns = [
    #path('admin/', admin.site.urls),
    url(r'^$',views.home_page,name='home'),
]
 ```

6. Anaconda Prompt运行

 ```python
python manage.py test
 ```

7. views.py改成

 ```python
from django.shortcuts import render
def home_page():
    pass
 ```
8. Anaconda Prompt运行

 ```python
python manage.py test
 ```

9. 成功

10. 修改test.py

 ```python
from django.urls import resolve
from django.test import TestCase
from django.http import HttpRequest
from lists.views import home_page
class HomePageTest(TestCase):
    def test_root_url_resolves_to_home_page_view(self):
        found = resolve('/')
        self.assertEqual(found.func, home_page)
    def test_home_page_returns_correct_html(self):
        request = HttpRequest()
        response = home_page(request)
        html = response.content.decode('utf8')
        self.assertTrue(html.startswith('<html>'))
        self.assertIn('<title>To-Do lists</title>', html)
        self.assertTrue(html.endswith('</html>'))
 ```
11. Anaconda Prompt运行

 ```python
python manage.py test
 ```
12. 多次修改view.py，最终改成
 ```python
from django.shortcuts import render
from django.http import HttpResponse
def home_page(request):
     return HttpResponse('<html><title>To-Do lists</title></html>')
 ```
13. Anaconda Prompt并运行单元测试
 ```python
python manage.py test
 ```
14. 成功
15. Anaconda Prompt运行功能测试，注意是tests2.py
 ```python
python functional_tests2.py
 ```
## 第四章

1.  TDD是一个长期的东西
2. Anaconda Prompt再运行一次功能测试`python functional_tests2.py`(如提示To-Do错误可能没开服务器)

3. 新建functional_tests3.py并添加代码 (第102张ppt，或4.pdf第41页)

4. Anaconda Prompt运行`python functional_tests3.py`，会提示
 ```shell
Unable to locate element: {"method":"tag name","selector":"h1"}
 ```
## 第四章续

1. Anaconda Prompt并运行单元测试`python manage.py test`，并提示成功

2. list目录下创建templates文件夹，并创建home.html文件，并填写
 ```html
<html>
    <title>To-Do lists</title>
</html>
 ```

3. 修改views.py为
 ```python
from django.shortcuts import render
def home_page(request):
    return render(request, 'home.html')
 ```

4. 运行`python manage.py test`，出现错误提示。
5. 打开settings.py，在INSTALLED_APPS中添加  `'lists',`

6. 运行`python manage.py test`，会有如下错误。（文本编译器不同，一般不会出错）（是断言home.html末尾是不是</html>）
 ```shell
    self.assertTrue(html.endswith('</html>'))
AssertionError: False is not true
 ```

7.  查看test.py代码，修改以下函数如下，其中4.pdf的47页中。
 ```python
 from django.template.loader import render_to_string
 	def test_home_page_returns_correct_html(self):
           request = HttpRequest()
           response = home_page(request)
           html = response.content.decode('utf8')
           expected_html = render_to_string('home.html')
           self.assertEqual(html, expected_html)
 ```

8. 再把以上函数改成4.pdf的47页中下方的代码。②和③一样。删掉②后如下。
 ```python
           response = self.client.get('/')
           self.assertTemplateUsed(response, 'home.html')
 ```

9. 运行`python manage.py test`，提示成功。

10. 可以改成`self.assertTemplateUsed(response, 'hom2e.html')` 后再运行`python manage.py test`，会出现错误提示 `Template 'hom2e.html' was not a template used to render the response. Actual template(s) used: home.html`。再改成正确的。此时也可以把 test_root_url_resolves_to_home_page_view函数删掉了。

11. git中commit。

